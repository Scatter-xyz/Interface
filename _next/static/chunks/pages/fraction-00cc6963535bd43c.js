(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[374],{8335:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fraction",function(){return c(1492)}])},1492:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return r}});var d=c(7568),e=c(4051),f=c.n(e),g=c(5893),h=c(8019),i=c(6076),j=c(7294);c(3678);var k,l=c(3609),m=c(2224),n=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"balance","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"operator","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"_approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"}]'),o=l.Pt,p=(k=(0,d.Z)(f().mark(function a(b){var c,d,e,g,h,j,k,o,p,q,r;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=b.walletContext,d=b.contractAddress,e=b.tokenID,g=b.tokenCount,h=new i.CH(l.tm,m,c.provider),a.next=4,h.connect(c.signer);case 4:return j=a.sent,k=new i.CH(d,n,c.provider),a.next=8,k.connect(c.signer);case 8:return o=a.sent,a.next=11,o.getApproved(e);case 11:if(p=a.sent,console.log("Approver is: ",p),!(p.toLowerCase()!==l.tm.toLowerCase())){a.next=21;break}return a.next=16,o.approve(l.tm,e);case 16:q=a.sent,console.log("Transcation Receipt: ",q),q.hash,a.next=27;break;case 21:return console.log("Can fractionalise now!"),a.next=24,j.fractionalize(d,e,g);case 24:r=a.sent,console.log("Transcation Receipt: ",r),r.hash;case 27:case"end":return a.stop()}},a)})),function(a){return k.apply(this,arguments)}),q=function(a){var b=a.walletNFTsList,c=a.walletContext,d=function(a,b){return a.set(b.key,b.value)},e=(0,j.useReducer)(d,new Map([])),f=e[0],h=e[1],i=function(a){var b=a.key,d=a.contractAddress,e=a.tokenID,g=f.get(b);console.log("Fraction Count: ",g," Contract: ",d," TokenID: ",e),g<=0||g>o?l.Pt:c&&p({walletContext:c,contractAddress:d,tokenID:e,tokenCount:g})};return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("div",{className:"pt-28 z-0 w-full",children:(0,g.jsx)("div",{className:"flex flex-rows justify-center w-full",children:(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-6 lg:gap-10 xl:gap-12",children:(void 0===b?[]:b).map(function(a){return(0,g.jsxs)("div",{className:"rounded-lg shadow-lg bg-white w-fit mb-0",children:[(0,g.jsx)("div",{className:"m-h-60",children:(0,g.jsx)("img",{className:"rounded-t-lg h-80 w-80 md:h-80 md:w-80 lg:h-72 lg:w-72",src:a.nftImage,alt:""})}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{className:"px-4 py-2 lg:py-4",children:[(0,g.jsxs)("div",{className:"flex flex-row",children:[(0,g.jsx)("p",{className:"text-emerald-700 text-sm font-semibold mb-2",children:"Original Address: "}),(0,g.jsx)("div",{className:"flex-1"}),(0,g.jsxs)("a",{className:"text-sm text-emerald-900 hover:text-emerald-700",href:"".concat(l.W5+a.originalAddress),rel:"noreferrer",target:"_blank",children:[a.originalAddress.substring(0,2)+"..."+a.originalAddress.substring(a.originalAddress.length-4,a.originalAddress.length)," "]})]}),(0,g.jsxs)("div",{className:"flex flex-row",children:[(0,g.jsx)("p",{className:"text-emerald-700 text-sm font-semibold mb-2",children:"Token Id:"}),(0,g.jsx)("div",{className:"flex-1"}),(0,g.jsx)("p",{className:"text-sm text-emerald-900",children:a.tokenID})]}),(0,g.jsxs)("div",{className:"flex flex-row",children:[(0,g.jsx)("p",{className:"text-emerald-700 text-sm font-semibold mb-2",children:"Fraction Count:"}),(0,g.jsx)("div",{className:"flex-1"}),(0,g.jsx)("input",{value:f.get(a.originalAddress+"-"+a.tokenID),onChange:function(b){return h({value:b.target.value,key:a.originalAddress+"-"+a.tokenID})},min:"1",max:o,className:"min-w-0 block w-20 lg:w-28 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-emerald-900 focus:outline-none",type:"number",name:"fractionCount",required:!0})]})]}),(0,g.jsx)("div",{className:"h-full w-full",children:(0,g.jsx)("button",{onClick:function(){return i({key:a.originalAddress+"-"+a.tokenID,contractAddress:a.originalAddress,tokenID:a.tokenID})},type:"button",className:"rounded-b-lg font-sans w-full py-4 bg-stiletto-500 hover:bg-stiletto-600 text-white font-semibold md:text-sm text-lg lg:text-xl",children:"Fractionalise"})})]})]},a.originalAddress+"-"+a.tokenID)})})})})})},r=function(){var a=(0,j.useState)(),b=a[0],c=a[1],d=(0,j.useState)([]),e=d[0],f=d[1];return(0,j.useEffect)(function(){if(b&&b.errorCode===l.pc);else if(b&&b.errorCode){var a,c,d,e;a=b.address,c=f,d=[],(e=new Headers).append("Content-Type","application/json"),fetch("https://polygon-mumbai.g.alchemy.com/v2/l0jLil9DtS2WsAcK8r9_bq7GBNrWHTFk/getNFTs/?owner=".concat(a),{method:"GET",headers:e,redirect:"follow"}).then(function(a){return a.json()}).then(function(a){a.ownedNfts.map(function(a){a.id.tokenMetadata.tokenType===l.Mt&&d.push({nftImage:a.media[0].gateway,originalAddress:a.contract.address,tokenID:parseInt(a.id.tokenId,16)})}),c(d)}).catch(function(a){return console.log("error",a)})}},[b]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(h.Z,{pageLoad:"Fraction",setWalletContext:c}),(0,g.jsx)("div",{className:"w-full min-h-content bg-gin-50",children:b&&!b.loading&&b.errorCode===l.pc?(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("div",{className:"h-screen w-full bg-gin-50 flex items-center justify-center my-10",children:(0,g.jsx)("a",{className:"rounded-lg bg-stiletto-500 text-white py-4 px-6 md:py-8 md:px-8 text-base md:text-lg font-bold hover:bg-stiletto-400",href:"https://metamask.io/",rel:"noreferrer",target:"_blank",children:" Install Metamask "})})}):b&&!b.loading&&b.errorCode===l.Ci?(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("div",{className:"h-screen w-full bg-gin-50"})}):(0,g.jsx)("div",{className:"pb-20 py-10 min-h-screen z-10 w-full",children:(0,g.jsx)(q,{walletNFTsList:e,walletContext:b})})})]})}},2224:function(a){"use strict";a.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":true,"internalType":"address","name":"originalNftContract","type":"address"},{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"fractionCount","type":"uint256"},{"indexed":true,"internalType":"address","name":"fractionNftContract","type":"address"},{"indexed":false,"internalType":"string","name":"tokenURI","type":"string"}],"name":"fractionaliseEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":true,"internalType":"address","name":"originalNftContract","type":"address"},{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"fractionNftContract","type":"address"}],"name":"mergeEvent","type":"event"},{"inputs":[],"name":"MAX_FRACTION_COUNT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"destroy","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"fractionCount","type":"uint256"}],"name":"fractionalize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"fractionAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"merge","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}]')}},function(a){a.O(0,[907,294,431,678,774,888,179],function(){var b;return a(a.s=8335)}),_N_E=a.O()}])