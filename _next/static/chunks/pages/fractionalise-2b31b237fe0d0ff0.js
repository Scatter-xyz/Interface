(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[499],{304:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fractionalise",function(){return c(9310)}])},9310:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return s}});var d,e=c(7568),f=c(4051),g=c.n(f),h=c(5893),i=c(8019),j=c(6076),k=c(7294),l=c(3678),m=c(3609),n=c(2224),o=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"balance","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"operator","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"owner","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"_approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"}]'),p=m.Pt,q=(d=(0,e.Z)(g().mark(function a(b){var c,d,e,f,h,i,k,l,p,q,r;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=b.walletContext,d=b.contractAddress,e=b.tokenID,f=b.tokenCount,h=new j.CH(m.tm,n,c.provider),a.next=4,h.connect(c.signer);case 4:return i=a.sent,k=new j.CH(d,o,c.provider),a.next=8,k.connect(c.signer);case 8:return l=a.sent,a.next=11,l.getApproved(e);case 11:if(p=a.sent,console.log("Approver is: ",p),!(p.toLowerCase()!==m.tm.toLowerCase())){a.next=21;break}return a.next=16,l.approve(m.tm,e);case 16:q=a.sent,console.log("Transcation Receipt: ",q),q.hash,a.next=27;break;case 21:return console.log("Can fractionalise now!"),a.next=24,i.fractionalize(d,e,f);case 24:r=a.sent,console.log("Transcation Receipt: ",r),r.hash;case 27:case"end":return a.stop()}},a)})),function(a){return d.apply(this,arguments)}),r=function(a){var b=a.walletNFTsList,c=a.walletContext,d=function(a,b){return a.set(b.key,b.value)},e=(0,k.useReducer)(d,new Map([])),f=e[0],g=e[1],i=function(a){var b=a.key,d=a.contractAddress,e=a.tokenID,g=f.get(b);console.log("Fraction Count: ",g," Contract: ",d," TokenID: ",e),g<=0||g>p?m.Pt:c&&q({walletContext:c,contractAddress:d,tokenID:e,tokenCount:g})};return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"p-20 z-0",children:(0,h.jsxs)("div",{className:"flex flex-rows",children:[(0,h.jsx)("div",{className:"flex-1"}),(0,h.jsx)("div",{className:"grid grid-cols-3 gap-20",children:(void 0===b?[]:b).map(function(a){return(0,h.jsxs)("div",{className:"rounded-lg shadow-lg bg-white max-w-sm",children:[(0,h.jsx)("div",{className:"m-h-60",children:(0,h.jsx)("img",{className:"rounded-t-lg",src:a.nftImage,alt:""})}),(0,h.jsxs)("div",{className:"p-6",children:[(0,h.jsxs)("div",{className:"flex flex-row",children:[(0,h.jsx)("p",{className:"text-emerald-700 text-sm font-semibold mb-2",children:"Original Address: "}),(0,h.jsx)("div",{className:"flex-1"}),(0,h.jsxs)("a",{className:"text-sm text-emerald-900 hover:text-emerald-700",href:"https://rinkeby.etherscan.io/address/".concat(a.originalAddress),rel:"noreferrer",target:"_blank",children:[a.originalAddress.substring(0,6)+"..."+a.originalAddress.substring(a.originalAddress.length-6,a.originalAddress.length)," "]})]}),(0,h.jsxs)("div",{className:"flex flex-row",children:[(0,h.jsx)("p",{className:"text-emerald-700 text-sm font-semibold mb-2",children:"Token Id:"}),(0,h.jsx)("div",{className:"flex-1"}),(0,h.jsx)("p",{className:"text-sm text-emerald-900",children:a.tokenID})]}),(0,h.jsxs)("div",{className:"flex flex-row",children:[(0,h.jsx)("p",{className:"text-emerald-700 text-sm font-semibold mb-2",children:"Fraction Count:"}),(0,h.jsx)("div",{className:"flex-1"}),(0,h.jsx)("input",{value:f.get(a.originalAddress+"-"+a.tokenID),onChange:function(b){return g({value:b.target.value,key:a.originalAddress+"-"+a.tokenID})},min:"1",max:p,className:"min-w-0 block w-28 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-emerald-900 focus:outline-none",type:"number",name:"fractionCount",required:!0})]}),(0,h.jsx)("div",{className:"relative grid place-items-center h-full mb-12 mt-16",children:(0,h.jsx)("button",{type:"button",onClick:function(){return i({key:a.originalAddress+"-"+a.tokenID,contractAddress:a.originalAddress,tokenID:a.tokenID})},className:"absolute font-sans px-12 py-4 bg-stiletto-500 hover:bg-stiletto-600 text-white font-semibold text-l uppercase rounded",children:"Fractionalise"})})]})]},a.originalAddress+"-"+a.tokenID)})}),(0,h.jsx)("div",{className:"flex-1"})]})})})},s=function(){var a=(0,k.useState)(),b=a[0],c=a[1],d=(0,k.useState)([]),e=d[0],f=d[1];return(0,k.useEffect)(function(){if(b&&!b.error){var a,c,d,e;a=b.address,c=f,d=[],(e=new Headers).append("Content-Type","application/json"),fetch("https://eth-rinkeby.alchemyapi.io/v2/9QLQtE0COOGdYHOSbo43OOYPqZ_Fw2OM/getNFTs/?owner=".concat(a),{method:"GET",headers:e,redirect:"follow"}).then(function(a){return a.json()}).then(function(a){a.ownedNfts.map(function(a){a.id.tokenMetadata.tokenType===m.Mt&&d.push({nftImage:a.media[0].gateway,originalAddress:a.contract.address,tokenID:parseInt(a.id.tokenId,16)})}),c(d)}).catch(function(a){return console.log("error",a)})}},[b]),(0,h.jsxs)("div",{className:"w-full min-h-content bg-gin-50",children:[(0,h.jsx)(i.Z,{pageLoad:"Fractionalise",setWalletContext:c}),(0,h.jsx)("div",{className:"pt-10 min-h-screen z-10",children:(0,h.jsx)(r,{walletNFTsList:e,walletContext:b})}),(0,h.jsx)(l.FooterData,{})]})}},2224:function(a){"use strict";a.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":true,"internalType":"address","name":"originalNftContract","type":"address"},{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"fractionCount","type":"uint256"},{"indexed":true,"internalType":"address","name":"fractionNftContract","type":"address"},{"indexed":false,"internalType":"string","name":"tokenURI","type":"string"}],"name":"fractionaliseEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"sender","type":"address"},{"indexed":true,"internalType":"address","name":"originalNftContract","type":"address"},{"indexed":false,"internalType":"uint256","name":"tokenId","type":"uint256"},{"indexed":true,"internalType":"address","name":"fractionNftContract","type":"address"}],"name":"mergeEvent","type":"event"},{"inputs":[],"name":"MAX_FRACTION_COUNT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"destroy","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_nftContractAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"uint256","name":"fractionCount","type":"uint256"}],"name":"fractionalize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"fractionAddress","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"merge","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}]')}},function(a){a.O(0,[651,294,325,774,888,179],function(){var b;return a(a.s=304)}),_N_E=a.O()}])